From 785f7d5f3f964d0dd58a524f8b1eab12689803ea Mon Sep 17 00:00:00 2001
From: Iurii Konovalenko <iurii.konovalenko@globallogic.com>
Date: Wed, 15 Jun 2016 20:14:46 +0300
Subject: [PATCH] Do no trap smc instructions

---
 xen/arch/arm/traps.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/xen/arch/arm/traps.c b/xen/arch/arm/traps.c
index aa3e3c2..3d82ab7 100644
--- a/xen/arch/arm/traps.c
+++ b/xen/arch/arm/traps.c
@@ -125,7 +125,7 @@ void init_traps(void)
 
     /* Setup hypervisor traps */
     WRITE_SYSREG(HCR_PTW|HCR_BSU_INNER|HCR_AMO|HCR_IMO|HCR_FMO|HCR_VM|
-                 HCR_TWE|HCR_TWI|HCR_TSC|HCR_TAC|HCR_SWIO|HCR_TIDCP|HCR_FB,
+                 HCR_TWE|HCR_TWI|HCR_TAC|HCR_SWIO|HCR_TIDCP|HCR_FB,
                  HCR_EL2);
     isb();
 }
-- 
1.9.1

