From 767e57df5040513496450f88bd90f248ca3157a9 Mon Sep 17 00:00:00 2001
From: Iurii Mykhalskyi <iurii.mykhalskyi@globallogic.com>
Date: Mon, 14 Nov 2016 17:02:45 +0200
Subject: [PATCH 3/3] arm64:dts:renesas: Adjust device tree for Renesas
 Salvator board with Xen

Signed-off-by: Iurii Mykhalskyi <iurii.mykhalskyi@globallogic.com>
---
 .../boot/dts/renesas/r8a7795-salvator-x-dom0.dts   | 29 ++++++++++++++++++++--
 1 file changed, 27 insertions(+), 2 deletions(-)

diff --git a/arch/arm64/boot/dts/renesas/r8a7795-salvator-x-dom0.dts b/arch/arm64/boot/dts/renesas/r8a7795-salvator-x-dom0.dts
index b9a67ec..cacbe7c 100644
--- a/arch/arm64/boot/dts/renesas/r8a7795-salvator-x-dom0.dts
+++ b/arch/arm64/boot/dts/renesas/r8a7795-salvator-x-dom0.dts
@@ -48,8 +48,33 @@
 	};
 
 	chosen {
-		bootargs = "ignore_loglevel rw root=/dev/nfs ip=dhcp";
-		stdout-path = "serial0:115200n8";
+		xen,dom0-bootargs = "console=hvc0 root=/dev/mmcblk1p1 rw rootwait rootfstype=ext4 ignore_loglevel";
+
+		modules {
+			#address-cells = <2>;
+			#size-cells = <2>;
+			module@1 {
+				compatible = "xen,linux-zimage", "xen,multiboot-module";
+				reg = <0x0 0x7a000000 0x0 0x02000000>;
+			};
+
+			module@2 {
+				compatible = "xen,xsm-policy", "xen,multiboot-module";
+				reg = <0x0 0x7c000000 0x0 0x10000>;
+			};
+		};
+	};
+
+	hypervisor {
+		compatible = "xen,xen-4.6", "xen,xen";
+		reg = <0x4b000000 0x20000 0x0 0x0>;
+		interrupts = <1 15 0xf08>;
+	};
+
+	psci {
+		compatible = "arm,psci-1.0";
+		method = "smc";
+		cpu_on = <2>;
 	};
 
 	memory@48000000 {
-- 
2.10.2

